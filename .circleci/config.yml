version: 2
jobs:
  build:
    docker:
      - image: qawolf/playwright-ci:v1.0.0
    steps:
      - checkout

      - run:
          command: npm install

      - run:
          command: |
            # Start local server
            npm run start & 
            npx wait-on http://localhost:3000
            npx qawolf test --headless
          environment:
            # configure tests with environment variables
            QAW_ARTIFACT_PATH: /tmp/artifacts
      - store_artifacts:
          path: /tmp/artifacts
